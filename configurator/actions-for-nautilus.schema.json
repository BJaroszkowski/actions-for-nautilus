{
	"$schema": "http://json-schema.org/draft-06/schema#",
	"$ref": "#/definitions/ActionsForNautilus",
	"definitions": {
		"MimeType": {
			"type": "string",
			"pattern": "^(!?[A-Za-z0-9-]+\\/(([A-Za-z0-9-]+)|\\*))|(\\*)|(\\*\\/\\*)$",
			"title": "Mimetype"
		},
		"PathPattern": {
			"type": "string",
			"format": "pattern",
			"title": "Path pattern",
			"options": {
				"infoText": "A file path pattern that, when matched, allows the associated command action to appear in its assigned menu. It can be expressed in glob syntax (*, +, [...]) or as a regular expression(re:...). If the pattern is prefixed with '!' character then the selected items must not match this pattern."
			}
		},
		"SortStyles": {
			"type": "string",
			"enum": [
				"manual",
				"auto"
			],
			"default": "manual",
			"title": "Menu sorting",
			"options": {
				"infoText": "Whether actions should be sorted automatically or left in the configured order."
			}
		},
		"FileType": {
			"type": "string",
			"enum": [
				"unknown",
				"file",
				"directory",
				"symbolic-link",
				"special",
				"shortcut",
				"mountable",
				"standard",
				"!unknown",
				"!file",
				"!directory",
				"!symbolic-link",
				"!special",
				"!shortcut",
				"!mountable",
				"!standard"
			],
			"title": "File type",
			"options": {
				"infoText": "A standard Nautilus file type that, when matched, allows the associated command action to appear in its assigned menu. If the file type is prefixed with '!' character then the selected items must NOT be of this type."
			}
		},
		"Action": {
			"type": "object",
			"format": "categories",
			"headerTemplate": "{{ self.label }}",
			"oneOf": [
				{
					"title": "Command",
					"$ref": "#/definitions/Command"
				},
				{
					"title": "Menu",
					"$ref": "#/definitions/Menu"
				}
			],
			"title":"Action",
			"options": {
				"infoText": "An entry that will appear in the Nautilus context menu. Such an entry can be a Command or a nested Menu."
			}
		},
		"ActionsForNautilus": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"actions": {
					"type": "array",
					"format": "tabs",
					"items": {
						"$ref": "#/definitions/Action"
					},
					"title": "Main Menu",
					"options": {
						"infoText": "The list of command configurations and/or submenus that will be added to the Nautilus context menu."
					}
				},
				"sort": {
					"$ref": "#/definitions/SortStyles"
				},
				"debug": {
					"title": "Enable debugging output",
					"type": "boolean",
					"options": {
						"infoText": "When set to true, extra debugging information is sent to the Nautilus stdout/stderr destinations."							}
				}
			},
			"required": [
				"actions"
			],
			"options": {
				"disable_properties": true
			},
			"title": "Actions For Nautilus configuration"
		},
		"Menu": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"type": {
					"type": "string",
					"const": "menu",
					"default": "menu",
					"title": "Menu",
					"options": {
						"hidden": true
					}
				},
				"label": {
					"type": "string",
					"minLength": 1,
					"title": "Label for the menu",
					"options": {
						"infoText":  "The label that will appear in the context menu for this sub menu."
					}
				},
				"sort": {
					"$ref": "#/definitions/SortStyles",
					"title": "Submenu sorting"
				},
				"actions": {
					"type": "array",
					"format": "tabs",
					"items": {
						"$ref": "#/definitions/Action"
					},
					"title": "Submenu Actions",
					"options": {
						"infoText": "The list of command and/or menu actions that will be displayed when this menu action is clicked on."
					}
				}
			},
			"required": [
				"label",
				"type",
				"actions"
			],
			"title": "Submenu",
			"options": {
				"infoText": "An entry in the Nautilus context menu or sub menu that, when clicked on, results in a sub menu being displayed.",
				"disable_properties": true
			}
		},
		"Command": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"type": {
					"type": "string",
					"const": "command",
					"default": "command",
					"title": "Command",
					"options": {
						"hidden": true
					}
				},
				"label": {
					"type": "string",
					"minLength": 1,
					"title": "Label for the command",
					"options": {
						"infoText": "The label that will appear in the context menu for this command.",
						"grid_columns": 2,
						"grid_break": true
					}
				},
				"command_line": {
					"type": "string",
					"minLength": 1,
					"title": "Command line to execute",
					"options": {
						"infoText":  "The command line to execute when the action is clicked on. Placeholders are allowed and affect the semantics of the execution.",
						"grid_columns": 5,
						"grid_break": true
					}
				},
				"use_shell": {
					"type": "boolean",
					"title": "Use shell",
					"options": {
						"infoText": "Instead of directly executing the command, execute it using the default shell command.",
						"grid_columns": 1
					}
				},
				"cwd": {
					"type": "string",
					"minLength": 1,
					"title": "Current working directory",
					"options": {
						"infoText": "The current working directory to set when executing the command. Placeholders are allowed.",
						"grid_columns": 2
					}
				},
				"max_items": {
					"type": "integer",
					"minimum": 1,
					"title": "Max items",
					"format": "number",
					"options": {
						"infoText": "The maximum number of items in the selection for which this action will be displayed.",
						"grid_columns": 1,
						"grid_break": true
					}
				},
				"mimetypes": {
					"type": "array",
					"uniqueItems": true,
					"format": "table",
					"items": {
						"$ref": "#/definitions/MimeType"
					},
					"title": "Mimetypes",
					"options": {
						"infoText": "A list of standard mimetype specifications that, when matched, allow the associated command action to appear in its assigned menu. If a mimetype is prefixed with '!' character then the selected items must NOT match that type.",
						"grid_columns": 3
					}
		
				},
				"filetypes": {
					"type": "array",
					"uniqueItems": true,
					"format": "table",
					"items": {
						"$ref": "#/definitions/FileType"
					},
					"title": "File types",
					"options": {
						"infoText": "A list of file types for which the action will be displayed, or not be displayed in the event of a '!' prefix.",
						"grid_columns": 2
					}
				},
				"path_patterns": {
					"type": "array",
					"uniqueItems": true,
					"format": "table",
					"items": {
						"$ref": "#/definitions/PathPattern"
					},
					"title": "Path patterns",
					"options": {
						"infoText": "A list of path patterns for which the action will be displayed, or not be displayed in the event of a '!' prefix.",
						"grid_columns": 2
					}
				}
			},
			"required": [
				"label",
				"type",
				"command_line"
			],
			"title": "Command",
			"options": {
				"infoText": "An entry in the Nautilus context menu or sub menu that, when clicked on, results in a command being executed."
			}
		}
	}
}